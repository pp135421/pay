{extend name="common/common" /}

{block name="css"}

{/block}

{block name="body"}
<div class="x-body">
    <input type="hidden"  name="id"  placeholder="英文名称" value="{if condition='$info'}{$info.id}{else /}0{/if}">
    <div class="layui-form-item" style="display: {if $info && $info.only_money}none{else /}block{/if}">
        <label class="layui-form-label">
            <span class="x-red">*</span> 英文名称
        </label>
        <div class="layui-input-inline">
            <input type="text" name="name_en"
                   class="layui-input" value="{if condition='$info'}{$info.name_en}{/if}">
        </div>
    </div>
    <div class="layui-form-item" style="display: {if $info && $info.only_money}none{else /}block{/if}">
        <label class="layui-form-label">
            <span class="x-red">*</span> 中文名称
        </label>
        <div class="layui-input-inline">
            <input type="text" name="name_cn"
                   class="layui-input" value="{if condition='$info'}{$info.name_cn}{/if}">
        </div>
    </div>
    {if condition='$info.id'}
    <div class="layui-form-item" style="display: {if $info && $info.only_money}none{else /}block{/if}">
        <label class="layui-form-label">
            <span class="x-red">*</span> 通道余额
        </label>
        <div class="layui-input-inline">
            <input type="text" name="channel_money"
                   class="layui-input" value="{if condition='$info'}{$info.channel_money}{/if}">
        </div>
    </div>
    <div class="layui-form-item" style="display: {if $info && $info.only_money}none{else /}block{/if}">
        <label class="layui-form-label">
            <span class="x-red">*</span> 最小单独
        </label>
        <div class="layui-input-inline">
            <input type="text" name="min_money"
                   class="layui-input" value="{if condition='$info'}{$info.min_money}{/if}">
        </div>
    </div>
    <div class="layui-form-item" style="display: {if $info && $info.only_money}none{else /}block{/if}">
        <label class="layui-form-label">
            <span class="x-red">*</span> 最大单独
        </label>
        <div class="layui-input-inline">
            <input type="text" name="max_money"
                   class="layui-input" value="{if condition='$info'}{$info.max_money}{/if}">
        </div>
    </div>
    <div class="layui-form-item">
        <label class="layui-form-label">
            <span class="x-red">*</span> 最小轮询
        </label>
        <div class="layui-input-inline">
            <input type="text" name="min_money_poll"
                   class="layui-input" value="{if condition='$info'}{$info.min_money_poll}{/if}">
        </div>
    </div>
    <div class="layui-form-item">
        <label class="layui-form-label">
            <span class="x-red">*</span> 最大轮询
        </label>
        <div class="layui-input-inline">
            <input type="text" name="max_money_poll"
                   class="layui-input" value="{if condition='$info'}{$info.max_money_poll}{/if}">
        </div>
    </div>
    <div class="layui-form-item">
        <label class="layui-form-label">
            <span class="x-red">*</span> 权重值
        </label>
        <div class="layui-input-inline">
            <input type="text" name="weight"
                   class="layui-input" value="{if condition='$info'}{$info.weight}{/if}">
        </div>
    </div>
    {/if}
    <div class="layui-form-item">
        <label class="layui-form-label">
            <span class="x-red">*</span> 通道费率
        </label>
        <div class="layui-input-inline">
            <input type="text" name="rate"
                   class="layui-input" value="{if condition='$info'}{$info.rate}{/if}">
        </div>
    </div>
    <div class="layui-form-item" style="display: {if $info && $info.id || $info.only_money}none{else /}block{/if}">
        <label class="layui-form-label">
            <span class="x-red">*</span> 通道类型
        </label>
        <div class="layui-input-inline">
            <select name="type_name">
                <option value="" >通道类型</option>
                <option value="alipay" {if condition="$info.type_name == 'alipay'"}selected="selected"{/if}>支付宝</option>
                <option value="wechat" {if condition="$info.type_name == 'wechat'"}selected="selected"{/if}>微信</option>
            </select>
            </select>
        </div>
    </div>
    <div class="layui-form-item" style="display: {if $info && $info.id || $info.only_money}none{else /}block{/if}">
        <label class="layui-form-label">
            <span class="x-red">*</span> 内部通道
        </label>
        <div class="layui-input-inline">
            <select name="is_inner">
                <option value="2">外部通道</option>
                <option value="1" {if condition="$info.is_inner == '1'"}selected="selected"{/if}>内部通道</option>
            </select>
            </select>
        </div>
    </div>
    <div class="layui-form-item">
        <label class="layui-form-label">
        </label>
        <button  class="layui-btn" id="btn" lay-filter="set" lay-submit="">
            {if condition='$info'}修改{else /}添加{/if}
        </button>
    </div>
</div>
{/block}

{block name="js"}
<script type="text/javascript">
    $("#btn").click(function(){
        var data = {
            'id': $('input[name=id]').val(),
            'name_en': $('input[name=name_en]').val(),
            'name_cn': $('input[name=name_cn]').val(),
            'channel_money': $('input[name=channel_money]').val(),
            'min_money': $('input[name=min_money]').val(),
            'max_money': $('input[name=max_money]').val(),
            'min_money_poll': $('input[name=min_money_poll]').val(),
            'max_money_poll': $('input[name=max_money_poll]').val(),
            'weight': $('input[name=weight]').val(),
            'rate': $('input[name=rate]').val(),
            'type_name': $('select[name=type_name]').val(),
            'is_inner': $('select[name=is_inner]').val(),
        };
        //加载效果可卡重复点击
        layer.load();
        $.ajax({
            url: '{:url("set")}',
            type:'POST',
            data: data,
            dataType:'json',
            success:function(result){
                layer.msg(result.msg);
                setTimeout(function(){
                    //关闭加载效果
                    layer.closeAll();
                    //关闭当前子窗口
                    if(result.code == 200) x_admin_close(1);
                }, 1000);
            }
        });
    });
</script>
{/block}

{extend name="common/common" /}

{block name="css"}

{/block}